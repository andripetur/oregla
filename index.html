<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> (รณ)regla </title>

        <script src="libs/fabric.min.js"></script>
        <script src="draw.js"></script>
        <script src="libs/flocking-all.min.js"></script>
        <script src="websocket.js"></script>
        <script src="utilities.js"></script>
        <script src="schillinger_functions.js"></script>
        <script src="chaos.js"></script>
        <script src="composition.js"></script>
        <script src="synthDefinitions.js"></script>

        <link rel="stylesheet" href="style.css"/>

    </head>

    <body>
      <div id='title'><br>(รณ)regla<br>&nbsp;</div>

        <canvas id="cvs"></canvas>

        <div id="controls">
          piano <input type='range' name='p-vol' min=0 max=1 step=0.01 oninput="setValue(this.value)">
          nuthing <input type='range' name='ffb-vol'>
          mor nuthing <input type='range' name='pianoVolume'>
        </div>

        <script>

        function setValue(v){
          sound.piano.set({
            "verb.mul": sound.line(parseFloat(v))
          });
        }
        initDrawing();

        var bPlaying = false;
        window.addEventListener("keydown", function (e) { // start keyboard listener

          if( event.keyCode >= 49 && event.keyCode <= 57 ) { // if nr 1 - 9 is pressed select that melody
            var n = event.keyCode - 48;
            // document.getElementById('splash').innerHTML = '<br><br><br><br>'+n;
            sound.chaosToPlay = n;

            moveChaos(sound.chaos[sound.chaosToPlay].points);
          }

          switch (event.code) {
            case 'KeyW':  case 'ArrowUp':
              break;
            case 'KeyS':  case 'ArrowDown':
              break;
            case 'KeyA':  case 'ArrowLeft':
              break;
            case 'KeyD':  case 'ArrowRight':
              break;
            case 'KeyE':
              break;
            case 'KeyP':
              break;
            case 'KeyM':
              break;
            case 'Enter':
              break;
            case 'Space':
              bPlaying ? sound.stopSequence() : sound.startSequence();
              bPlaying = !bPlaying;
              break;
            }
        })
        </script>
    </body>
</html>
