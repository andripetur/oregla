<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> (รณ)regla </title>

        <script src="libs/fabric.min.js"></script>
        <script src="draw.js"></script>
        <script src="libs/flocking-all.min.js"></script>
        <script src="websocket.js"></script>
        <script src="utilities.js"></script>
        <script src="schillinger_functions.js"></script>
        <script src="chaos.js"></script>
        <script src="composition.js"></script>
        <script src="synthDefinitions.js"></script>

        <link rel="stylesheet" href="style.css"/>

    </head>

    <body>
      <div class=titleStyle><br><b>(รณ)regla<br>&nbsp;</b></div>
      <!-- <div id=splash></div> -->
      <!-- <div id=memberCount></div> -->
        <canvas id="cvs"></canvas>
        <div id="controls">
          piano <input type='range' name='p-vol' class='seethrough' min=0 max=1 step=0.01 oninput="setValue(this.value)">
          nuthing <input type='range' name='ffb-vol' class='seethrough'>
          mor nuthing <input type='range' name='pianoVolume' class='seethrough'>
        </div>

        <script>

        function setValue(v){
          sound.piano.set({
            "verb.mul": sound.line(parseFloat(v))
          });
        }
        initDrawing();

        var bPlaying = false;
        window.addEventListener("keydown", function (e) { // start keyboard listener

          if( event.keyCode >= 49 && event.keyCode <= 57 ) { // if nr 1 - 9 is pressed select that melody
            var n = event.keyCode - 48;
            // document.getElementById('splash').innerHTML = '<br><br><br><br>'+n;
            sound.chaosToPlay = n;

            moveChaos(sound.chaos[sound.chaosToPlay].points);
          }
          switch (event.keyCode) {
            case 87: /*w*/  case 38: /*up*/
              break;
            case 83: /*s*/  case 40: /*down*/
              break;
            case 65: /*a*/  case 37: /*left*/
              break;
            case 68: /*d*/  case 39: /*right*/
              break;
            case 69: /*e*/
              break;
            case 80: /*p*/
              break;
            case 77: /*m*/
              break;
            case 13: /*enter*/
            break;
            case 32: /*spaceBar*/
              !bPlaying ? sound.startSequence() : sound.stopSequence();
              bPlaying = !bPlaying;
              break;
            // default:
            //   console.log(event.keyCode)
            //   break;
            }
        })
        </script>
    </body>
</html>
